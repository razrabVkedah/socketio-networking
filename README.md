# Rusleo Socket.IO Networking for Unity

–õ—ë–≥–∫–∞—è –∫–ª–∏–µ–Ω—Ç‚Äë—Å–µ—Ä–≤–µ—Ä–Ω–∞—è —Å–µ—Ç—å –¥–ª—è Unity –Ω–∞ **Socket.IO**: –∫–æ–º–Ω–∞—Ç—ã, RPC, —Å–µ—Ç–µ–≤—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏ –ø–ª–∞–≤–Ω–∞—è –∏–Ω—Ç–µ—Ä–ø–æ–ª—è—Ü–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–π. –ö–ª–∏–µ–Ω—Ç ‚Äî Unity/C#, —Å–µ—Ä–≤–µ—Ä ‚Äî Node.js + MongoDB.

> –ü—Ä–æ–µ–∫—Ç –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç —Å–µ—Ç–µ–≤—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É —Ä–µ–∞–ª—å–Ω–æ–≥–æ —É—Ä–æ–≤–Ω—è: –∞–≤—Ç–æ—Ä–∏—Ç–µ—Ç —Ö–æ—Å—Ç–∞, —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ø–æ —Ç–∏–∫–∞–º, —Ä–µ—Ñ–ª–µ–∫—Å–∏—è –∞—Ç—Ä–∏–±—É—Ç–æ–≤, rate‚Äëlimit –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ, –±—É—Ñ–µ—Ä —Å–æ—Å—Ç–æ—è–Ω–∏–π –∏ –∏–Ω—Ç–µ—Ä–ø–æ–ª—è—Ü–∏—è.

‚ö†Ô∏è **–í–∞–∂–Ω–æ:** –∑–∞ –æ—Å–Ω–æ–≤—É –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø–ª–∞—Ç–Ω—ã–π –ø–∞–∫–µ—Ç –∏–∑ AssetStore ‚Äî **Best Socket.IO**. –û–Ω –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–æ–º–µ—â—ë–Ω –≤ –ø—É–±–ª–∏—á–Ω—ã–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π. –ü–æ—ç—Ç–æ–º—É –ª—é–±–æ–π —Ñ–æ—Ä–∫ —ç—Ç–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞ –Ω–µ –±—É–¥–µ—Ç –∑–∞–ø—É—Å–∫–∞—Ç—å—Å—è ¬´–∏–∑ –∫–æ—Ä–æ–±–∫–∏¬ª ‚Äî –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è –ª–∏–±–æ –ø–æ–∫—É–ø–∫–∞ –ø–∞–∫–µ—Ç–∞, –ª–∏–±–æ –∑–∞–º–µ–Ω–∞ –Ω–∞ –¥—Ä—É–≥–æ–π –∫–ª–∏–µ–Ω—Ç Socket.IO.

‚ö†Ô∏è **–°–µ—Ä–≤–µ—Ä–Ω–∞—è —á–∞—Å—Ç—å** –Ω–∞–ø–∏—Å–∞–Ω–∞ –Ω–∞ Node.js, –Ω–æ —Å–¥–µ–ª–∞–Ω–∞ –∫—Ä–∞–π–Ω–µ –ø—Ä–æ—Å—Ç–æ –∏ –≤ —Ç–µ–∫—É—â–µ–º –≤–∏–¥–µ –≤—ã–≥–ª—è–¥–∏—Ç ¬´—á–µ—Ä–Ω–æ–≤–æ–π¬ª. –ü—É–±–ª–∏—á–Ω–æ –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –æ–Ω–∞ –Ω–µ –≤—ã–ª–æ–∂–µ–Ω–∞ (—Å—Ç—ã–¥–Ω–æ —Ç–∞–∫–æ–µ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å üôÇ). –í README –ø—Ä–∏–≤–µ–¥–µ–Ω—ã —Ç–æ–ª—å–∫–æ –æ–±—â–∏–µ —Å—Ö–µ–º—ã –∏ –æ–ø–∏—Å–∞–Ω–∏–µ.

---

## ‚ú® –ß—Ç–æ –≤–Ω—É—Ç—Ä–∏

* **Rooms & Lobby** ‚Äî –∫–æ–º–Ω–∞—Ç—ã —Å —Ö–æ—Å—Ç–æ–º, —Å–ø–∏—Å–∫–æ–º –∫–ª–∏–µ–Ω—Ç–æ–≤ –∏ –ø–∏–Ω–≥–æ–º; –≤—Ö–æ–¥/–≤—ã—Ö–æ–¥, –±–∞–∑–æ–≤–∞—è –∑–∞—â–∏—Ç–∞ –æ—Ç —Ñ–ª—É–¥–∞.
* **Network Update (ticks)** ‚Äî –ø–∞–∫–µ—Ç—ã `network-update` —Å –¥–∞–Ω–Ω—ã–º–∏ –∑–∞ –∫–∞–¥—Ä/—Ç–∏–∫.
* **RPC —á–µ—Ä–µ–∑ –∞—Ç—Ä–∏–±—É—Ç—ã** ‚Äî `[RPC(AuthorityMode, SyncMode)]` —Å —Ä–µ—Ñ–ª–µ–∫—Å–∏–µ–π –∏ –≤—ã–∑–æ–≤–∞–º–∏ ¬´–ø–æ –∏–º–µ–Ω–∏¬ª.
* **Network Variables** ‚Äî `NetworkVariable<T>` —Å —Ä–µ–∂–∏–º–∞–º–∏ **Authority**, **SyncMode** (Calm/Forced) –∏ **InterpolationType**.
* **–ò–Ω—Ç–µ—Ä–ø–æ–ª—è—Ü–∏—è** ‚Äî –±—É—Ñ–µ—Ä —Å–æ—Å—Ç–æ—è–Ω–∏–π, —Ä–∞—Å—á—ë—Ç –≤—Ä–µ–º–µ–Ω–∏ –∏–Ω—Ç–µ—Ä–ø–æ–ª—è—Ü–∏–∏ (RTT+–±—É—Ñ–µ—Ä+1/tick).
* **Ping** ‚Äî –æ—Ü–µ–Ω–∫–∞ RTT –∫–ª–∏–µ–Ω—Ç–æ–º –∏ —Å–µ—Ä–≤–µ—Ä–æ–º (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –ª–æ–±–±–∏ –∏ –∏–Ω—Ç–µ—Ä–ø–æ–ª—è—Ü–∏–∏).
* **Transport** ‚Äî Socket.IO –ø–æ–≤–µ—Ä—Ö TCP/WebSocket.

> –ö–ª—é—á–µ–≤—ã–µ —Å—É—â–Ω–æ—Å—Ç–∏ –≤ –∫–ª–∏–µ–Ω—Ç–µ: `NetworkMonoBehaviour`, `NetworkVariable<T>`, `RPCAttribute`, `NetworkUpdateHandler`, `RoomsManager`, `PingHandler`.

---

## üß≠ –ù–∞–≤–∏–≥–∞—Ü–∏—è

* [–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç](#-–±—ã—Å—Ç—Ä—ã–π-—Å—Ç–∞—Ä—Ç)
* [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞](#-–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞)
* [–ü—Ä–∏–º–µ—Ä—ã –∫–æ–¥–∞](#-–ø—Ä–∏–º–µ—Ä—ã-–∫–æ–¥–∞)
* [–°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è](#-—Å—Ç—Ä—É–∫—Ç—É—Ä–∞-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è)
* [–¶–∏—Ñ—Ä—ã –ø—Ä–æ–µ–∫—Ç–∞](#-—Ü–∏—Ñ—Ä—ã-–ø—Ä–æ–µ–∫—Ç–∞)
* [Roadmap](#-roadmap)
* [–õ–∏—Ü–µ–Ω–∑–∏—è](#-–ª–∏—Ü–µ–Ω–∑–∏—è)

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1) –°–µ—Ä–≤–µ—Ä (Node.js)

```bash
# 1. –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
npm i

# 2. –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (–ø—Ä–∏–º–µ—Ä)
# .env
MONGO_URL=mongodb://localhost:27017/socketio
PORT=4000

# 3. –∑–∞–ø—É—Å–∫
node server.js  # –∏–ª–∏ –≤–∞—à entrypoint (index.js/app.js)
```

### 2) –ö–ª–∏–µ–Ω—Ç (Unity)

1. –û—Ç–∫—Ä—ã—Ç—å –ø—Ä–æ–µ–∫—Ç –≤ Unity 2021+ (–∏–ª–∏ –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å –≤–µ—Ä—Å–∏—é –ø–æ–¥ Socket.IO –∫–ª–∏–µ–Ω—Ç).
2. –£–∫–∞–∑–∞—Ç—å URL —Å–µ—Ä–≤–µ—Ä–∞ –≤ –∫–æ–Ω—Ñ–∏–≥–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `ClientConfig.asset` / —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∞—è —Å—Ç—Ä–æ–∫–∞ –≤ `Client.cs`).
3. –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å—Ü–µ–Ω—É **Lobby** ‚Üí —Å–æ–∑–¥–∞—Ç—å/–≤–æ–π—Ç–∏ –≤ –∫–æ–º–Ω–∞—Ç—É ‚Üí –æ—Ç–∫—Ä—ã—Ç—å –∏–≥—Ä–æ–≤—É—é —Å—Ü–µ–Ω—É.

> **–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø–ª–∞—Ç–Ω—ã–π –ø–∞–∫–µ—Ç **Best Socket.IO**

---

## üß± –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
Unity Client                              Node.js Server
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ                            ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
Client (SocketIO)  ‚Üê connect(guid) ‚Üí  auth/session middleware (Mongo)
   ‚îÇ                                              ‚îÇ
RoomsManager  ‚Üê enter-room/tickRate/hostTime ‚Üí  Rooms (host/clients)
   ‚îÇ                                              ‚îÇ
NetworkUpdateHandler  ‚Üê‚Üí  'network-update'  ‚Üê‚Üí  Room routing + rate‚Äëlimit
RPCHandler             ‚Üê‚Üí  'network-rpc'     ‚Üê‚Üí  ‚Üï (host ‚Üî clients)
VariablesHandler       ‚Üê‚Üí  'network-variable'‚Üê‚Üí  ‚Ä¶
```

* **Authority:** HostToClient / ClientToHost / Both (–ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ; –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞ –¥–æ–±–∞–≤–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ).
* **TickRate:** —á–∞—Å—Ç–æ—Ç–∞ –ª–æ–≥–∏—á–µ—Å–∫–∏—Ö –ø–∞–∫–µ—Ç–æ–≤, –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –∏–∑ –∫–æ–º–Ω–∞—Ç—ã.
* **Interpolation:** ¬´—Å–¥–≤–∏–Ω—É—Ç–æ–µ –Ω–∞–∑–∞–¥¬ª –≤—Ä–µ–º—è = `RTT.avg + safety + 1/tick`.
* **Rate‚Äëlimit:** –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —á–∞—Å—Ç–æ—Ç—ã —Å–æ–±—ã—Ç–∏–π –Ω–∞ —Å–æ–∫–µ—Ç (anti‚Äëflood).

---

## üß™ –ü—Ä–∏–º–µ—Ä—ã –∫–æ–¥–∞

### RPC (–≤—ã–∑–æ–≤ –º–µ—Ç–æ–¥–∞ –ø–æ —Å–µ—Ç–∏)

```csharp
using ClientSocketIO.NetworkBehaviour.Attributes;
using UnityEngine;

public class Shooter : ClientSocketIO.NetworkBehaviour.NetworkMonoBehaviour
{
    [RPC(AuthorityMode.Both, SyncMode.Calm)]
    private void RpcShoot(Vector3 position)
    {
        // —ç—Ñ—Ñ–µ–∫—Ç—ã, –ª–æ–∫–∞–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞ –ø–æ–ø–∞–¥–∞–Ω–∏—è
    }

    public void Shoot(Vector3 worldPos)
    {
        InvokeRPC((System.Action<Vector3>)RpcShoot, worldPos);
    }
}
```

### NetworkVariable (—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∑–Ω–∞—á–µ–Ω–∏—è)

```csharp
using ClientSocketIO.NetworkData;
using ClientSocketIO.NetworkData.NetworkVariables;
using UnityEngine;

public class Health : ClientSocketIO.NetworkBehaviour.NetworkMonoBehaviour
{
    [SerializeField] private NetworkVariableInt health = new(100, AuthorityMode.Both, SyncMode.Calm, InterpolationType.None);

    private void Start()
    {
        health.OnGetValueFromServer.AddListener(v => Debug.Log($"HP: {v}"));
    }

    public void Damage(int amount)
    {
        health.Value = Mathf.Max(0, health.Value - amount);
    }
}
```

---

## üóÇ –û–±–æ–±—â—ë–Ω–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å–µ—Ä–≤–µ—Ä–∞ (–Ω–µ—Ç –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏)

```
/Server (Node.js)
 ‚î£ src/
 ‚îÉ ‚î£ server.ts|js (–≤—Ö–æ–¥)
 ‚îÉ ‚î£ rooms/ (Room, routing, rate‚Äëlimit)
 ‚îÉ ‚î£ middleware/ (auth, guid‚Äësession)
 ‚îÉ ‚îó db/ (mongo)
 ‚î£ .env.example
 ‚îó package.json
```

---

## üìä –¶–∏—Ñ—Ä—ã –ø—Ä–æ–µ–∫—Ç–∞

> –ù–∞ –æ—Å–Ω–æ–≤–µ —Ç–µ–∫—É—â–µ–≥–æ —Å–Ω—ç–ø—à–æ—Ç–∞ –∫–æ–¥–∞.

**–ö–ª–∏–µ–Ω—Ç (C#)**

* \~4‚ÄØ233 —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞
* 87 –∫–ª–∞—Å—Å–æ–≤, 3 struct, 2 interface, 5 enum
* 140 –∞—Ç—Ä–∏–±—É—Ç–æ–≤ (`[RPC]` –∏ –¥—Ä.), 195 –º–µ—Ç–æ–¥–æ–≤
* –£–ø–æ–º–∏–Ω–∞–Ω–∏—è –∫–ª—é—á–µ–≤—ã—Ö —Å—É—â–Ω–æ—Å—Ç–µ–π: `SocketIO`√ó187, `NetworkVariable`√ó154, `Interpolation`√ó90, `AuthorityMode`√ó65, `SyncMode`√ó68

**–°–µ—Ä–≤–µ—Ä (Node.js)**

* \~900 —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞
* –ù–∞–π–¥–µ–Ω—ã –º–∞—Ä–∫–µ—Ä—ã: `socket`√ó179, `room`√ó180, `mongo`√ó58, `ping`√ó23, `limit`√ó21

---

---

## üí° –ü–æ—á–µ–º—É —ç—Ç–æ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ

* –°–µ—Ç–µ–≤–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å —á—ë—Ç–∫–∏–º–∏ —Ä–æ–ª—è–º–∏: —Ö–æ—Å—Ç ‚Üî –∫–ª–∏–µ–Ω—Ç—ã.
* –†–µ—Ñ–ª–µ–∫—Å–∏—è –∞—Ç—Ä–∏–±—É—Ç–æ–≤ –¥–ª—è RPC/–ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö (—É–¥–æ–±–Ω–æ–µ API –¥–ª—è –≥–µ–π–º–ø–ª–µ—è).
* –ë—É—Ñ–µ—Ä/–∏–Ω—Ç–µ—Ä–ø–æ–ª—è—Ü–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–π ‚Üí –ø–ª–∞–≤–Ω–æ—Å—Ç—å –¥–∞–∂–µ –ø—Ä–∏ –Ω–µ—Å—Ç–∞–±–∏–ª—å–Ω–æ–º RTT.
* –°–µ—Ä–≤–µ—Ä: Socket.IO + Mongo, middleware, –∑–∞—â–∏—Ç–∞ –æ—Ç —Ñ–ª—É–¥–∞.
* –ü—É—Ç—å –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É: –≤–∞–ª–∏–¥–∞—Ü–∏—è –∞–≤—Ç–æ—Ä–∏—Ç–µ—Ç–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ, —Ä–µ–ø–ª–µ–π/–ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ –≤–≤–æ–¥–∞.

---

## üó∫ Roadmap

* [ ] –í–∞–ª–∏–¥–∞—Ü–∏—è RPC/Variables –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ (authority‚Äëchecks).
* [ ] –£–Ω–∏—Ñ–∏–∫–∞—Ü–∏—è —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏ (Newtonsoft.Json –≤–µ–∑–¥–µ).
* [ ] –ö–æ–Ω—Å—Ç–∞–Ω—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Å–∏—Å—Ç–µ–º–Ω—ã–µ RPC (—Å–ø–∞–≤–Ω) –∏ ID.
* [ ] –ö–æ–Ω—Ñ–∏–≥–∏ `tickRate/fps` per room (–∏–∑ .env/–∞–¥–º–∏–Ω–∫–∏).
* [ ] –ü—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ/–æ—Ç–∫–∞—Ç –≤–≤–æ–¥–∞ (client‚Äëside prediction + reconciliation).

---

‚ú¶ –ê–≤—Ç–æ—Ä: [Rusleo](https://github.com/razrabVkedah)
